"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.filterInternalFieldsAndTypes = exports.getKeyForFederation = exports.getArgsFromKeysForFederation = void 0;
const wrap_1 = require("@graphql-tools/wrap");
function getArgsFromKeysForFederation(representations) {
    return { representations };
}
exports.getArgsFromKeysForFederation = getArgsFromKeysForFederation;
function getKeyForFederation(root) {
    return root;
}
exports.getKeyForFederation = getKeyForFederation;
function filterInternalFieldsAndTypes(finalSchema) {
    const removeEntitiesField = new wrap_1.FilterRootFields((operation, fieldName) => !(operation === 'Query' && (fieldName === '_entities' || fieldName === '_sdl')));
    const removeEntityAndAny = new wrap_1.FilterTypes(type => type.name !== '_Entity' &&
        type.name !== '_Any' &&
        type.name !== '_FieldSet' &&
        type.name !== '_Service' &&
        !type.name.startsWith('link__'));
    const fakeSubschemaConfig = {
        schema: finalSchema,
        transforms: [removeEntitiesField, removeEntityAndAny],
    };
    for (const transform of fakeSubschemaConfig.transforms) {
        finalSchema = transform.transformSchema(finalSchema, fakeSubschemaConfig);
    }
    return finalSchema;
}
exports.filterInternalFieldsAndTypes = filterInternalFieldsAndTypes;
